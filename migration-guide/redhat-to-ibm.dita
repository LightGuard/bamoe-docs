<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE topic
 PUBLIC "-//OASIS//DTD DITA Topic//EN" "topic.dtd">
<topic id="redhat-to-ibm">
   <title>Migrating from Red Hat to IBM Business Automation Manager Open Editions</title>
   <body>
      <p>The offerings formally known as Red Hat Process Automation Manager / Red Hat Decision Manager were transitioned to IBM in 2022, where the product was re-branded as IBM Business Automation Manager Open Editions.</p>
      <section id="_overview">
         <title>Overview</title>
         <p>IBM BAMOE version 8.0.x provides a seemless upgrade path for customers and workloads formally leveraging the Red Hat offerings.
By remaining a functionally equivalent product to the Red Hat offering, customers can easily migrate from the former Red Hat offering once they have purchased an IBM subscription for IBM BAMOE.
This section provides guidance on how to migrate from the former Red Hat offerings of Red Hat Process Automation Manager / Red Hat Decision Manager to IBM BAMOE version 8.0.x.
It is recommended that you follow this migration path before attempting to migrate to the next generation of the product known as IBM BAMOE version 9.1.x.</p>
         <p>If you have designed your jBPM application based on the deployment of the KIE Server using Spring Boot and want to upgrade from the latest community version to the enterprise-supported IBM Business Automation Manager Open Editions version 8.0.x, you can find more information on the procedure in the following link. See, <xref href="https://community.ibm.com/community/user/automation/blogs/tim-wuthenow/2023/06/16/community-to-enterprise-bamoe" scope="external">https://community.ibm.com/community/user/automation/blogs/tim-wuthenow/2023/06/16/community-to-enterprise-bamoe</xref>. As both projects are based on Maven architectures, the process is considerably simplified, by design.</p>
      </section>
      <section id="_prerequisites">
         <p>If your current application is based on the legacy product known as Red Hat JBoss BPM Suite version 6, you must first bring your installation up to the latest release of Red Hat Process Automation Manager / Red Hat Decision Manager version 7 before performing any migration to IBM BAMOE.
See the existing <xref href="https://access.redhat.com/documentation/en-us/red_hat_process_automation_manager/7.0/html/migrating_from_red_hat_jboss_bpm_suite_6.4_to_red_hat_process_automation_manager_7.0/index" scope="external">Red Hat Documentation</xref> to facilitate migrating from Red Hat JBoss BPM Suite version 6 to Red Hat Process Automation Manager/Red Hat Decision Manager version 7.x.
After this migration, you are free to migrate to any release of IBM BAMOE.</p>
         <p>The following tools are required to migrate to BAMOE version 8.0.x:</p>
         <ul>
            <li>
               <xref href="https://openjdk.org" scope="external">JDK 8 or 11</xref> or later is installed.</li>
            <li>
               <xref href="https://maven.apache.org" scope="external">Apache Maven 3.8.6</xref> or later is installed.</li>
         </ul>
         <note type="important">
            <p>Due to <xref href="https://github.com/quarkusio/quarkus/issues/31011" scope="external">https://github.com/quarkusio/quarkus/issues/31011</xref>, it is recommended to use the Apache Maven version 3.8.6, or later.</p>
         </note>
      </section>
      <section id="_procedure">
         <p>The following steps are typically involved in migrating from Red Hat Process Automation Manager / Red Hat Decision Manager to IBM Business Automation Manager Open Editions:</p>
         <div conref="redhat-to-ibm_step_1_download_product_archives.dita">_step_1_download_product_archives</div>
         <div conref="redhat-to-ibm_step_2_update_maven_configuration.dita">_step_2_update_maven_configuration</div>
         <div conref="redhat-to-ibm_update_maven_settings.dita">_update_maven_settings</div>
         <div conref="redhat-to-ibm_update_to_use_the_maven_bill_of_materials_bom.dita">_update_to_use_the_maven_bill_of_materials_bom</div>
      </section>
      <section id="_product_version_mapping">
         <p>IBM Business Automation Manager Open Editions version 8.0.x is based on the former Red Hat 7.13.x offering:</p>
         <table>
            <title>Version Mapping for IBM BAMOE Version 8.0.x</title>
            <tgroup cols="4">
               <colspec colname="col_1" colwidth="25*"/>
               <colspec colname="col_2" colwidth="25*"/>
               <colspec colname="col_3" colwidth="25*"/>
               <colspec colname="col_4" colwidth="25*"/>
               <thead>
                  <row>
                     <entry>IBM Product Version</entry>
                     <entry>Red Hat Product Version (<i>maintenance only</i>)</entry>
                     <entry>BOM Version</entry>
                     <entry>Maven Library Version</entry>
                  </row>
               </thead>
               <tbody>
                  <row>
                     <entry>
                        <p>
                           <tt>IBM BAMOE 8.0.0</tt>
                        </p>
                     </entry>
                     <entry>
                        <p>
                           <tt>RHPAM/RHDM 7.13.0</tt>
                        </p>
                     </entry>
                     <entry>
                        <p>
                           <tt>8.0.0.redhat-00001</tt>
                        </p>
                     </entry>
                     <entry>
                        <p>
                           <tt>7.67.2.Final-redhat-00001</tt>
                        </p>
                     </entry>
                  </row>
                  <row>
                     <entry>
                        <p>
                           <tt>IBM BAMOE 8.0.1</tt>
                        </p>
                     </entry>
                     <entry>
                        <p>
                           <tt>RHPAM/RHDM 7.13.1</tt>
                        </p>
                     </entry>
                     <entry>
                        <p>
                           <tt>8.0.1.redhat-00001</tt>
                        </p>
                     </entry>
                     <entry>
                        <p>
                           <tt>7.67.2.Final-redhat-00003</tt>
                        </p>
                     </entry>
                  </row>
                  <row>
                     <entry>
                        <p>
                           <tt>IBM BAMOE 8.0.2</tt>
                        </p>
                     </entry>
                     <entry>
                        <p>
                           <tt>RHPAM/RHDM 7.13.2</tt>
                        </p>
                     </entry>
                     <entry>
                        <p>
                           <tt>8.0.2.redhat-00001</tt>
                        </p>
                     </entry>
                     <entry>
                        <p>
                           <tt>7.67.2.Final-redhat-00004</tt>
                        </p>
                     </entry>
                  </row>
                  <row>
                     <entry>
                        <p>
                           <tt>IBM BAMOE 8.0.3</tt>
                        </p>
                     </entry>
                     <entry>
                        <p>
                           <tt>RHPAM/RHDM 7.13.3</tt>
                        </p>
                     </entry>
                     <entry>
                        <p>
                           <tt>8.0.3.redhat-00002</tt>
                        </p>
                     </entry>
                     <entry>
                        <p>
                           <tt>7.67.2.Final-redhat-00006</tt>
                        </p>
                     </entry>
                  </row>
                  <row>
                     <entry>
                        <p>
                           <tt>IBM BAMOE 8.0.4</tt>
                        </p>
                     </entry>
                     <entry>
                        <p>
                           <tt>RHPAM/RHDM 7.13.4</tt>
                        </p>
                     </entry>
                     <entry>
                        <p>
                           <tt>8.0.4.redhat-00002</tt>
                        </p>
                     </entry>
                     <entry>
                        <p>
                           <tt>7.67.2.Final-redhat-00008</tt>
                        </p>
                     </entry>
                  </row>
                  <row>
                     <entry>
                        <p>
                           <tt>IBM BAMOE 8.0.4-IF001</tt>
                        </p>
                     </entry>
                     <entry>
                        <p>
                           <tt>RHPAM/RHDM 7.13.4</tt>
                        </p>
                     </entry>
                     <entry>
                        <p>
                           <tt>8.0.4.redhat-00003</tt>
                        </p>
                     </entry>
                     <entry>
                        <p>
                           <tt>7.67.2.Final-redhat-00014</tt>
                        </p>
                     </entry>
                  </row>
                  <row>
                     <entry>
                        <p>
                           <tt>IBM BAMOE 8.0.5</tt>
                        </p>
                     </entry>
                     <entry>
                        <p>
                           <tt>RHPAM/RHDM 7.13.5</tt>
                        </p>
                     </entry>
                     <entry>
                        <p>
                           <tt>8.0.5.redhat-00001</tt>
                        </p>
                     </entry>
                     <entry>
                        <p>
                           <tt>7.67.2.Final-redhat-00017</tt>
                        </p>
                     </entry>
                  </row>
                  <row>
                     <entry>
                        <p>
                           <tt>IBM BAMOE 8.0.6</tt>
                        </p>
                     </entry>
                     <entry>
                        <p>
                           <tt>N/A</tt>
                        </p>
                     </entry>
                     <entry>
                        <p>
                           <tt>8.0.6.redhat-00006</tt>
                        </p>
                     </entry>
                     <entry>
                        <p>
                           <tt>7.67.2.Final-redhat-00025</tt>
                        </p>
                     </entry>
                  </row>
               </tbody>
            </tgroup>
         </table>
      </section>
      <section id="_step_3_update_tooling_runtime">
         <p>Automated update tools are often provided with both patch updates and new minor versions of IBM BAMOE to facilitate updating certain components such as Decision/Business Central, KIE Server, and the headless controller.
Other IBM BAMOE artifacts such as decision engine and standalone Decision/Business Central, are released as new artifacts with each minor release and you must reinstall them to apply the update.</p>
         <note type="note">
            <p>You can deploy the latest version of IBM BAMOE as either a new installation or as a patch update from one of the previous patch releases.</p>
         </note>
         <p>You can use the same automated update tool to apply both patch updates and minor release upgrades.
Patch updates of IBM BAMOE include the latest security updates and bug fixes.
Minor release upgrades will include enhancements, security updates, and bug fixes.</p>
         <note type="note">
            <p>Only updates are included in the IBM BAMOE update tools.
Updates to Red Hat JBoss EAP must be applied using Red Hat JBoss EAP patch distributions.
For more information about Red Hat JBoss EAP patching, see the <xref href="https://access.redhat.com/documentation/en-us/red_hat_jboss_enterprise_application_platform/7.4/html/patching_and_upgrading_guide/index" scope="external">Red Hat JBoss EAP Patching and Upgrading Guide</xref>.</p>
         </note>
      </section>
      <section id="_prerequisites_2">
         <p>Your Decision/Business Central and KIE Server instances are not running.
Do not apply updates while you are running an instance of Decision/Business Central or KIE Server.</p>
      </section>
      <section id="_procedure_2">
         <ol>
            <li>
               <p>Navigate to the <xref href="https://www.ibm.com/support/pages/node/6596913" scope="external">IBM Business Automation Manager Open Editions version 8.0.x Downloads Page</xref> and follow the instructions to download the IBM BAMOE <b>Update Tool</b>.</p>
               <p>If you are upgrading to a new minor release, first apply the latest patch update to your current version of IBM BAMOE and then follow this procedure again to upgrade to the new minor release.</p>
            </li>
            <li>
               <p>Extract the downloaded file to a temporary directory.</p>
               <p>This update tool automates the update of certain components such as Decision/Business Central, KIE Server, and the headless controller.
Use this update tool first to apply updates and then install any other updates or new release artifacts that are relevant to your IBM BAMOE distribution.</p>
            </li>
            <li>
               <p>If you want to preserve any files from being updated by the update tool, navigate to the extracted <tt>bamoe-$VERSION-update</tt> folder, open the <tt>protectedlist.txt</tt> file, and add the relative paths to the files that you do not want to be updated.</p>
               <p>When a file is listed in the <tt>protectedlist.txt</tt> file, the update script does not replace the file with the new version.
A new file is created containing the same information, and a <tt>.new</tt> suffix is added, leaving the old file in place.
If you block files that are no longer being distributed, the update tool creates an empty marker file with a <tt>.removed</tt> suffix.
You can then choose to retain, merge, or delete these new files manually.</p>
               <p>Example files to be excluded in <tt>protectedlist.txt</tt> file:</p>
               <codeblock outputclass="language-shell">
WEB-INF/web.xml  // Custom file
styles/base.css  // Obsolete custom file kept for record
</codeblock>
               <p>The contents of the blocked file directories after the update:</p>
               <codeblock outputclass="language-shell">
$ ls WEB-INF
web.xml web.xml.new

$ ls styles
base.css base.css.removed
</codeblock>
            </li>
            <li>
               <p>In your command terminal, navigate to the temporary directory where you extracted the <tt>bamoe-$VERSION-update.zip</tt> file and run the <i>apply-updates</i> script in the following format:</p>
               <note type="important">
                  <p>Make sure that your Decision/Business Central and KIE Server instances are not running before you apply updates.
Do not apply updates while you are running an instance of Decision/Business Central or KIE Server.</p>
               </note>
               <p>On Linux or Unix-based systems:</p>
               <codeblock outputclass="language-shell">
$ ./apply-updates.sh $DISTRO_PATH $DISTRO_TYPE
</codeblock>
               <p>On Windows:</p>
               <codeblock outputclass="language-shell">
$ .\apply-updates.bat $DISTRO_PATH $DISTRO_TYPE
</codeblock>
               <p>The <tt>$DISTRO_PATH</tt> portion is the path to the relevant distribution directory and the <tt>$DISTRO_TYPE</tt> portion is the type of distribution that you are updating with this update.
The following distribution types are supported in IBM BAMOE update tool:</p>
               <table>
                  <title>Distribution types for IBM BAMOE version 8.0.x</title>
                  <tgroup cols="2">
                     <colspec colname="col_1" colwidth="50*"/>
                     <colspec colname="col_2" colwidth="50*"/>
                     <thead>
                        <row>
                           <entry>Archive</entry>
                           <entry>Description</entry>
                        </row>
                     </thead>
                     <tbody>
                        <row>
                           <entry>
                              <p>bamoe-8.0-BC7</p>
                           </entry>
                           <entry>
                              <p>Updates Business Central (<tt>business-central.war</tt>)</p>
                           </entry>
                        </row>
                        <row>
                           <entry>
                              <p>bamoe-8.0-KS8</p>
                           </entry>
                           <entry>
                              <p>Updates KIE Server (<tt>kie-server.war</tt>)</p>
                           </entry>
                        </row>
                        <row>
                           <entry>
                              <p>bamoe-kie-server-jws</p>
                           </entry>
                           <entry>
                              <p>Updates KIE Server on Red Hat JBoss Web Server (<tt>kie-server.war</tt>)</p>
                           </entry>
                        </row>
                        <row>
                           <entry>
                              <p>bamoe-controller-ee7</p>
                           </entry>
                           <entry>
                              <p>Updates the headless controller (<tt>controller.war</tt>)</p>
                           </entry>
                        </row>
                        <row>
                           <entry>
                              <p>bamoe-controller-jws</p>
                           </entry>
                           <entry>
                              <p>Updates the headless controller on Red Hat JBoss Web Server (<tt>controller.war</tt>)</p>
                           </entry>
                        </row>
                     </tbody>
                  </tgroup>
               </table>
               <p>Example update to Decision/Business Central and KIE Server for a full IBM BAMOE distribution on Red Hat JBoss EAP:</p>
               <codeblock outputclass="language-shell">
$ ./apply-updates.sh ~EAP_HOME/standalone/deployments/business-central.war bamoe-8.0-BC7
$ ./apply-updates.sh ~EAP_HOME/standalone/deployments/kie-server.war IBAMOE-8.0-KS8
</codeblock>
               <p>Example update to headless IBM Business Automation Manager controller, if used:</p>
               <codeblock outputclass="language-shell">
$ ./apply-updates.sh ~EAP_HOME/standalone/deployments/controller.war bamoe-controller-ee7
</codeblock>
               <p>The update script creates a backup folder in the extracted <tt>bamoe-$VERSION-update</tt> folder with a copy of the specified distribution, and then proceeds with the update.</p>
            </li>
            <li>
               <p>After the update tool completes, return to the <xref href="https://www.ibm.com/mysupport/s/?language=en_US" scope="external">IBM Support</xref> page where you have downloaded the update tool and install any other updates or new release artifacts that are relevant to your IBM BAMOE distribution.</p>
               <p>For files that already exist in your IBM BAMOE distribution, such as .<tt>jar</tt> files for the decision engine or other add-ons, replace the existing version of the file with the new version from the <xref href="https://www.ibm.com/mysupport/s/?language=en_US" scope="external">IBM Support</xref> page.</p>
            </li>
            <li>
               <p>If you use the standalone IBM Business Automation Manager Open Editions version 8.0.x - Maven Repository artifact (<tt>bamoe-8.0.6-maven-repository.zip</tt>), such as in air-gap environments, download IBM Business Automation Manager Open Editions version 8.0.x - Maven Repository and extract the downloaded <tt>bamoe-8.0.6-maven-repository.zip</tt> file to your existing <tt>~/maven-repository</tt> directory to update the relevant contents.</p>
               <p>Example Maven repository update:</p>
               <codeblock outputclass="language-shell">
unzip -o bamoe-8.0.6-maven-repository.zip 'rhba-8.0.2.GA-maven-repository/maven-repository/*' -d /tmp/rhbaMavenRepoUpdate

$ mv /tmp/rhbaMavenRepoUpdate/rhba-8.0.2.GA-maven-repository/maven-repository/ $REPO_PATH/
</codeblock>
               <note type="tip">
                  <p>You can remove the <tt>/tmp/rhbaMavenRepoUpdate</tt> folder after you complete the update.</p>
               </note>
            </li>
            <li>
               <p>
                  <b>Optional</b>: If you are changing IBM BAMOE from using property-based user storage to file-based user storage, complete the following steps:</p>
               <p outputclass="title">
                  <b>Navigate to the <tt>$JBOSS_HOME</tt> directory and run one of the following commands:</b>
               </p>
               <p>On Linux or Unix-based systems:</p>
               <codeblock outputclass="language-shell">
$ ./bin/standalone.sh --admin-only -c standalone-full.xml
$ ./bin/jboss-cli.sh --connect --file=bamoe-$VERSION-update/elytron/add-kie-fs-realm.cli
</codeblock>
               <p>On Windows:</p>
               <codeblock outputclass="language-shell">
$ ./bin/standalone.bat --admin-only -c standalone-full.xml
$ ./bin/jboss-cli.bat --connect --file=bamoe-$VERSION-update/elytron/add-kie-fs-realm.cli
</codeblock>
               <p outputclass="title">
                  <b>Run the following command:</b>
               </p>
               <p>On Linux or Unix-based systems:</p>
               <codeblock outputclass="language-shell">
$ ./bin/elytron-tool.sh filesystem-realm --users-file standalone/configuration/application-users.properties --roles-file standalone/configuration/application-roles.properties --output-location standalone/configuration/kie-fs-realm-users --filesystem-realm-name kie-fs-realm-users
</codeblock>
               <p>On Windows:</p>
               <codeblock outputclass="language-shell">
$ ./bin/elytron-tool.bat filesystem-realm --users-file standalone/configuration/application-users.properties --roles-file standalone/configuration/application-roles.properties --output-location standalone/configuration/kie-fs-realm-users --filesystem-realm-name kie-fs-realm-users
</codeblock>
               <p>Navigate to the directory where you extracted the bamoe-$VERSION-update.zip file and run one of the following commands to apply the kie-fs-realm patch:</p>
               <p>On Linux or Unix-based systems:</p>
               <codeblock outputclass="language-shell">
$ ./elytron/kie-fs-realm-patch.sh ~/$JBOSS_HOME/standalone/configuration/kie-fs-realm-users/
</codeblock>
               <p>On Windows:</p>
               <codeblock outputclass="language-shell">
$ ./elytron/kie-fs-realm-patch.bat ~/$JBOSS_HOME/standalone/configuration/kie-fs-realm-users/
</codeblock>
            </li>
            <li>After you finish applying all relevant updates, start Decision/Business Central and KIE Server and login.</li>
            <li>
               <p>Verify that all the project data is present and accurate in Decision/Business Central, and in the top-right corner of the Decision/Business Central window, click your profile name and click About to verify the updated product version number.</p>
               <p>If you encounter errors or notice any missing data in Decision/Business Central, you can restore the contents in the backup folder within the <tt>bamoe-$VERSION-update</tt> folder to revert the update tool changes.
You can also reinstall the relevant release artifacts from your previous version of IBM BAMOE.
After restoring your previous distribution, you can try again to run the update.</p>
            </li>
         </ol>
      </section>
      <section id="_step_4_update_persistence">
         <p>For applications based on Red Hat Process Automation Manager, you may be required to update the runtime database.
For migrating the database, the easiest way is to do it in sequence, as most of the jobs are very small (re: 2-4 lines of SQL).
They are all mapped by the version progression, so it will be fairly quick.
So, for instance, if you are running a PostgreSQL database, you must do the following:</p>
         <ol>
            <li>Connect to your database instance using your method of preference.</li>
            <li>Apply the SQL scripts appropriate for the version you are migrating from up to RHPAM 7.13.x.</li>
         </ol>
         <codeblock outputclass="language-shell">
...
$ psql -h $dbhost -U $user &lt; rhpam-7.11-to-7.12.sql
$ psql -h $dbhost -U $user &lt; rhpam-7.12-to-7.13.sql
$ psql -h $dbhost -U $user &lt; rhpam-7.13-to-7.13.1.sql
...
</codeblock>
         <note type="note">
            <p>BAMOE version 8.0.x’s database is compatible with Red Hat Process Automation Manager 7.13.x, so all you need to do is to update the database to that level, and you will be set to migrate the rest of your application.</p>
         </note>
         <p>Once you have executed these SQL statements, your datasource is now up to date.
If you are running a different database than PostgreSQL, replace the <tt>psql</tt> command with your appropriate database and tooling of choice; the files should largely be the same.</p>
      </section>
   </body>
</topic>